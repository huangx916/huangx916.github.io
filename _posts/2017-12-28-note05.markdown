---
layout:     post
title:      "游戏开发笔记(五)"
subtitle:   " \"开发笔记\""
date:       2017-12-28 22:00:00
author:     "A-SHIN"
header-img: "img/bg/021.jpg"
catalog: true
tags:
    - 杂记
---

> “Yeah It's on. ”


## 前言
[接前篇](https://huangx916.github.io/2017/12/18/note04/)早些年游戏开发工作中的笔记，放上来以防丢失。有些规则现在可能不适用了(如一些是U3D4早些版本的记录)。有些因为水平有限，有理解错误的地方，望指正！~  
笔记比较乱，没整理

## 正文
##### Unity3D  
ECS: convert to entity  需要下载安装hybrid renderer包，否则运行后game object不可见。  

ECS；        Job system；    Burst；    SRP LWRP HDRP；    post-processing stack；    asmdef (Assembly Definition Files)；    Timeline&Cinemachine；  GPU Skin;    GPU Instancing;     

post-processing local volume blend distance 形成的包围盒需要包含进post-process layer中设置的trigger坐标。不然local volume不起作用。  

OnPostRender函数中调用Graphics.Blit没效果，可能是由于hdr开启的原因。    
Every Graphics.Blit causes RenderTexture.ResolveAA if MSAA enabled which is killing framerate.  

Unity使用的是OpenGL标准，即-1是左和下，1是右和上， 0是远裁面，1是近裁面  

GBuffer中储存当前像素的Albedo, Specular, AO, normal, Depth等  
```
struct UnityStandardData
{
    half3   diffuseColor;
    half    occlusion;

    half3   specularColor;
    half    smoothness;

    float3  normalWorld;        // normal in world space
};
```
通过深度图反推世界坐标就需要viewProjection matrix的逆矩阵: 
```
float4 worldPos = mul(_InvVP, float4(i.uv*2-1, depth, 1)); 
```

渲染管线在决定使用哪一个Pass来绘制物体的时候，正是识别Pass的Lightmode来决定的  

##### UnrealEngine4  
PreInit-> LoadCoreModules-> UClassRegisterAllCompiledInClasses-> TClassCompiledInDefer<TClass>::Register-> TClass::StaticClass-> GetPrivateStaticClass(TPackage)-> GetPrivateStaticClassBody-> InitializePrivateStaticClass->UObjectBase::Register  

AppInit-> InitUObject-> StaticUObjectInit-> UObjectBaseInit-> UObjectProcessRegistrants-> UObjectForceRegistration-> UObjectBase::DeferredRegister-> AddObject

ProcessNewlyLoadedUObjects-> UObjectLoadAllCompiledInDefaultProperties-> 
Z_Construct_UClass_UMyClass  


## 后记
